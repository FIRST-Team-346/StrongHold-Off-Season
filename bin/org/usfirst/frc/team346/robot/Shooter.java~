package org.usfirst.frc.team346.robot;

import edu.wpi.first.wpilibj.CANTalon;
import edu.wpi.first.wpilibj.Solenoid;
//TODO: make sure these speeds are rights
public class Shooter {

    CANTalon ShooterTop;
    CANTalon ShooterBottom;
    Solenoid Gripper;
    Solenoid Trigger;
    double LoadSetpointTop;
    double LoadSetpointBottom;
    double LoadSetpointTrigger;
    double ShootSetpointTop;
    double ShootSetpointBottom;
    double ShootSetpointMaxErrorPercent;
    double portcullis;
    public Shooter (CANTalon a, CANTalon b, Solenoid g, Solenoid t)
    {
    	ShooterTop = a;
    	ShooterBottom = b;
    	Gripper = g;
    	Trigger = t;
    	LoadSetpointTop = -3600; //need to set these values later
        LoadSetpointBottom = 1000;
        LoadSetpointTrigger = -1000;
        ShootSetpointTop = 8000;
        ShootSetpointBottom = -100;
        ShootSetpointMaxErrorPercent = .01;
        portcullis = 1800;
    }
	
    public void setMotors(double topSpeed, double bottomSpeed, double triggerSpeed)
    {
    	if(!ShooterTop.isControlEnabled()){
    		ShooterTop.enableControl();
    	}
    	ShooterTop.set(topSpeed);		
    	
    	ShooterBottom.set(-1*ShooterTop.getOutputVoltage()/12.0);
    	
   		//Trigger.set(triggerSpeed);		
    }
    
    public void LoadBall(){
		setMotors(LoadSetpointTop, LoadSetpointBottom, LoadSetpointTrigger);
		if(Gripper.get())
		{
			Trigger.set(false);
			Gripper.set(false);
		}
    }
    
    public void Stop(){
    	ShooterTop.disableControl();
    	ShooterBottom.set(0);
    //	Trigger.set(0);

    }
    
    public void closeJaws(){
    
    	Gripper.set(true);
    	
    }
    public void openJaws(){
    	Gripper.set(false);
    }
  /*  public void GripBall (){
    		Gripper.set(true);
    		Trigger.set(false);
    }*/
    
    public void SpinUp(){
    	setMotors(ShootSetpointTop,ShootSetpointBottom,0);
    	Gripper.set(false);
    }
    
  //  public boolean IsAbleToFire(){
    	/*if((ShooterTop.getSpeed()>=ShootSetpointTop - (ShootSetpointTop * ShootSetpointMaxErrorPercent)) &&
    			(ShooterBottom.getSpeed()>=ShootSetpointBottom - (ShootSetpointBottom * ShootSetpointMaxErrorPercent)))
    		return true;
    	return false; //figure this out later
    *///}
    
    public void Fire()
    {

    		if(Gripper.get())
    		{
    			Gripper.set(false);
    			Trigger.set(true);
    		}
        	setMotors(ShootSetpointTop,ShootSetpointBottom,100);
    }
    public void ejectBall()
    {
    	setMotors(ShootSetpointTop,ShootSetpointBottom,100);
    }
    
    public void AutoShootAndFire(){
    	
    }
    public void trigger(){
    	Trigger.set(true);
    }
    public void triggerFalse(){
    	Trigger.set(false);
    }
    public void Portcullis(){
    ShooterTop.set(portcullis);
    ShooterBottom.set(0);
    }
}
